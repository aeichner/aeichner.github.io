#include "xmlparser.h"

static const index_t token_length[] = {
	0, 1, 6, 0, 2, 1,  1,  3,  1,  0,  0,  0,  4,  0,  1,  0,  1,  1,  1, 1, 0, 5, 0, 1, 0, 0, 2, 1, 1, 0, 2, 1, 1, 1, 1, 3, 1, 1, 1, 0
};
static const index_t token_offset[] = {
	0, 0, 1, 7, 7, 9, 10, 11, 14, 15, 15, 15, 15, 19, 19, 20, 20, 21, 22,23,24,24,29,29,30,30,30,32,33,34,34,36,37,38,39,40,43,44,45,46
};
static const uint8_t token_list[] = {
	//
	0,
	1, 2, 3, 4, 5, 6,
	//
	7, 8,
	9,
	17,
	10, 11, 12,
	13,
	//
	//
	//
	2, 4, 3, 5,
	//
	17,
	//
	3,
	14,
	14,
	17,
	//
	1, 2, 3, 4, 5,
	//
	7,
	//
	//
	15, 16,
	17,
	12,
	//
	4, 3,
	12,
	17,
	17,
	12,
	2, 4, 3,
	17,
	16,
	17
	//
};
static const index_t target_offset[] = {
	0, 2, 5,13,15,19,22,25,30,33,35,37,39,45,47,50,52,55,58,61,64,66,73,75,78,80,82,86,89,92,94,98,101,104,107,110,115,118,121,124,126
//	2, 3, 8, 2, 4, 3, 3, 5, 3, 2, 2, 2, 6, 2, 3, 2, 3, 3, 3, 3, 2, 7, 2, 3, 2, 2, 4, 3, 3, 2, 4, 3,  3,  3,  3,  5,  3,  3,  3,  2
};
static const state_t target_list[] = {
	 0, 0,
	 0, 2, 0,
	39, 4, 5, 6, 7, 8, 9, 0,
	34, 0,
	12, 10, 11, 0,
	 0, 13, 0,
	15, 14, 0,
	16, 17, 18, 19, 0,
	 0, 13, 0,
	21, 0,
	22, 0,
	23, 0,
	39, 5, 7, 6, 8, 0,
	24, 0,
	15, 14, 0,
	39, 0,
	39, 6, 0,
	 0, 25, 0,
	 0, 26, 0,
	28, 27, 0,
	29, 0,
	39, 4, 5, 6, 7, 8, 0,
	12, 0,
	12, 10, 0,
	30, 0,
	31, 0,
	34, 32, 33, 0,
	28, 27, 0,
	16, 19, 0,
	35, 0,
	39, 7, 6, 0,
	16, 19, 0,
	37, 36, 0,
	 3, 38, 0,
	16, 19, 0,
	39, 5, 7, 6, 0,
	37, 36, 0,
	34, 33, 0,
	 3, 38, 0,
	 0, 0,
};

/*
entry:
	  1 |           0 -> 2
	  2 | /0 -> 39, 1 -> 4, 2 -> 5, 3 -> 6, 4 -> 7, 5 -> 8, 6 -> 9
	  3 | /11 -> 34
	  4 | /1 -> 12, 7 -> 10, 8 -> 11
	  5 |           9 -> 13
	  6 | /3 -> 15, 17 -> 14
	  7 | /4 -> 16, 10 -> 17, 11 -> 18, 12 -> 19
	  8 |           13 -> 20
	  9 | /6 -> 21
	 10 | /7 -> 22
	 11 | /8 -> 23
	 12 | /0 -> 39, 2 -> 5, 4 -> 7, 3 -> 6, 5 -> 8
	 13 | /9 -> 24
	 14 | /3 -> 15, 17 -> 14
	 15 | /0 -> 39
	 16 | /0 -> 39, 3 -> 6
	 17 |           14 -> 25
	 18 |           14 -> 26
	 19 | /12 -> 28, 17 -> 27
	 20 | /13 -> 29
	 21 | /0 -> 39, 1 -> 4, 2 -> 5, 3 -> 6, 4 -> 7, 5 -> 8
	 22 | /1 -> 12
	 23 | /1 -> 12, 7 -> 10
	 24 | /2 -> 30
	 25 | /10 -> 31
	 26 | /11 -> 34, 15 -> 32, 16 -> 33
	 27 | /12 -> 28, 17 -> 27
	 28 | /4 -> 16, 12 -> 19
	 29 | /5 -> 35
	 30 | /0 -> 39, 4 -> 7, 3 -> 6
	 31 | /4 -> 16, 12 -> 19
	 32 | /15 -> 37, 17 -> 36
	 33 | /16 -> 3, 17 -> 38
	 34 | /4 -> 16, 12 -> 19
	 35 | /0 -> 39, 2 -> 5, 4 -> 7, 3 -> 6
	 36 | /15 -> 37, 17 -> 36
	 37 | /11 -> 34, 16 -> 33
	 38 | /16 -> 3, 17 -> 38
	[39]|
*/

static const token_t tokens[] = {
	{0, 0, "LineSymbolizer"},
	{0, 0, "Description"},
	{0, 0, "Geometry"},
	{0, 0, "PerpendicularOffset"},
	{0, 0, "Stroke"},
	{0, 0, "BaseSymbolizer"},
	{0, 0, "Name"},
	{0, 0, "Abstract"},
	{0, 0, "Title"},
	{0, 0, "PropertyName"},
	{0, 0, "GraphicFill"},
	{0, 0, "GraphicStroke"},
	{0, 0, "SvgParameter"},
	{0, 0, "OnlineResource"},
	{0, 0, "Graphic"},
	{0, 0, "InitialGap"},
	{0, 0, "Gap"},
	{2, 0, "expression"}
};

static void dispatch(int trans, parser_ctx* ctx)
{
    switch(trans) {
    case 56:
    case 59:
    	printf("Eating this element\n");
        xmlTextReaderNext(ctx->rd);
        break;
    default: {}
    }
}

xml_schema const test_schema = {
    .start = 1,
    .tokens = tokens,
    .token_list = token_list,
    .token_offset = token_offset,
    .token_length = token_length,
    .target_list = target_list,
    .target_offset = target_offset,
    .dispatch = dispatch
};

